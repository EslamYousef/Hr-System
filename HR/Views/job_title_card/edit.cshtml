@model HR.Models.job_title_cards
    @using HR.Resource;

@{
    ViewBag.Title = "edit";
    Layout = "~/Views/Shared/MainLayOut.cshtml";
}
<script>
   
    function remove1(thi) 
    {
        var t =parseInt($("#number").val());
        $("#number").val(t - 1);

            thi.parent().parent().remove();


     }
    function generat3e()
    {
       
        var slot_code = $("#code").val();
        var slot_desc = $("#name").val();
        var level = $("#level_setup").val();
        var org = $("#chart1").val();
        if (slot_code != "0" && slot_desc != "" && level != "" && org != "")
        {

            var num1 = (parseInt($("#number").val()));
            var num2 = (parseInt($("#increase").val()));
            var num = parseInt(num2 - num1+1);
            for (var i = 1; i < (num); i++)
            {

                var current_slot_ID=slot_code+"_"+i;
                var div=$("#add11").find("tr");
             

                var flag = 0;
                for (var o = 0; o < div.length; o++) {
                    var inputs = div[o].children;
                    var first =inputs[1].children;
                    debugger
                    var f=first[0].value;
                    if (f == current_slot_ID)
                    {
                        flag = 1;
                        num=num+1;
                        break;
                    }
                }
                var div=$("#add1").find("tr");
             
                if(flag==0)
                {
                    var flag = 0;
                    for (var o = 0; o < div.length; o++) {
                        var inputs = div[o].children;
                        var first = inputs[0].children;
                        debugger
                        var f=first[0].value;
                        if (f == current_slot_ID)
                        {
                            flag = 1;
                            num=num+1;
                            break;
                        }
                    }
                }

                if(flag==0)
                {
                    debugger
                    var t=
                    "<tr><td><input value='" + slot_code + "_" + i + "' class='form-control' name='slotcode__' readonly /></td>" +
                    "<td><select id='drop1' name='job_level' class='form-control d1' /></td>"+
                    "<td><select id='enum1' name='type' class='form-control e1' /></td>" +
                    "<td><input value='" + slot_desc + "'  class='form-control' readonly /></td>" +
                    "<td><select id='drop2' name='organization' class='form-control d2' /></td>" +
                    "<td><select id='enum2' name='status'  class='form-control e2' /></td>"+
                     "<td>Empty</td><td>Empty</td>"+
                    "<td><input type='button' value=@organ.remove class='remove btn btn-danger' onclick='remove($(this))' /></td>" +
              
                    "</tr>"
                    $("#add1").append(t);
                }
            }
            if(flag==0)
            {
                var firstdrop = " ";
                $.ajax
                    ({
                        type: "post",
                        url: "/Helper/ALL_job_level_setup",
                        data: {  },
                        success: function (result)
                        {
                            debugger
                            var ii = $("#level_setup").val();

                            $.each(result, function (key, value) {
                                debugger
                                if (value.ID == ii)
                                {
                                    firstdrop += "<option value='" + value.ID + "' selected>" + "[  " + value.Code + " ]</option>";
                                }
                                else
                                {
                                    firstdrop += "<option value='" + value.ID + "' >" + "[  " + value.Code + " ]</option>";
                                }
                            })
                            $(".d1").html(firstdrop);

                        }
                    });
                var seconddrop = " ";
                $.ajax
                    ({
                        type: "post",
                        url: "/Helper/all_organization_chart",
                        data: {},
                        success: function (result) {
                            var ii = $("#chart1").val();

                            $.each(result, function (key, value) {
                                if (value.ID == ii)
                                {
                                    seconddrop += "<option  value='" + value.ID + "' selected >" + "[  " + value.Code + " ]</option>";
                                }
                                else
                                {
                                    seconddrop += "<option value='" + value.ID + "' >" + "[  " + value.Code + " ]</option>";
                                }

                            })
                            $(".d2").html(seconddrop);

                        }
                    });
                var seconddrop1 = "<option value='" + 1 + "' >" + "[  " + "active" + " ]</option>";
                var seconddrop2 = "<option value='" + 2 + "' >" + "[  " + "Inactive" + " ]</option>";
                $(".e1").append(seconddrop1);
                $(".e1").append(seconddrop2);
                $("#oppo").append(seconddrop1);
                $("#oppo").append(seconddrop2);
                var seconddrop1 = "<option value='" + 1 + "' >" + "[  " + "created" + " ]</option>";
                var seconddrop2 = "<option value='" + 2 + "' >" + "[  " + "Report_as_ready" + " ]</option>";
                var seconddrop3 = "<option value='" + 3 + "' >" + "[  " + "Approved" + " ]</option>";
                var seconddrop4 = "<option value='" + 4 + "' >" + "[  " + "Rejected" + " ]</option>";
                var seconddrop5 = "<option value='" + 5 + "' >" + "[  " + "Canceled" + " ]</option>";
                var seconddrop6 = "<option value='" + 6 + "' >" + "[  " + "Recervied" + " ]</option>";
                var seconddrop7 = "<option value='" + 7 + "' >" + "[  " + "Closed" + " ]</option>";
                $(".e2").append(seconddrop1);
                $(".e2").append(seconddrop2);
                $(".e2").append(seconddrop3);
                $(".e2").append(seconddrop4);
                $(".e2").append(seconddrop5);
                $(".e2").append(seconddrop6);
                $(".e2").append(seconddrop7);
                if (num > 1)
                {

                    //$("#generateenum").prop('disabled', true);
                    $("#number").readOnly = true;
                    $("#clearenum11").attr('disabled', false);
                    $("#number").val(num2);
                    $("#increase").readOnly = true;
                }
            }
    }
    else
    {
    }

}
    function level()
    {


        var id = $("#level_setup").val();
        $.ajax({
            type: "post",
            url: "/Helper/job_level_setup",
            data: { "id": id },
            success: function (result) {

                $("#levelname").val(result.Name);
            }
        });
    }
    function p11arent()
    {

        var id = $("#parent").val();
        $.ajax({
            type: "post",
            url: "/Helper/job_title_card",
            data: { "id": id },
            success: function (result) {

                $("#parentname").val(result.name);
            }
        });
    }
    function nationality11()
    {

        var id = $("#nationality").val();
        $.ajax({
            type: "post",
            url: "/Helper/nationality",
            data: { "id": id },
            success: function (result) {

                $("#nationalityname").val(result.Name);
            }
        });
    }
    function defaultt11()
    {

        var id = $("#defaultt").val();
        $.ajax({
            type: "post",
            url: "/Helper/job_sub_class",
            data: { "id": id },
            success: function (result) {
                $("#defaultname").val(result.Name);

            }
        });
    }
    function chart11() {
        var id = $("#chart1").val();
        $.ajax({
            type: "post",
            url: "/job_title_card/getchart",
            data: { "id": id },
            success: function (result) {
                $("#chartname").val(result.unit_Description);

            }
        });
    }

    function clearnum()
    {

            $("#add1").empty();
            $("#generateenum").attr('disabled', false);
            $("#number").readOnly = false;
            $("#increase").readOnly = false;
            $("#clearenum11").prop('disabled', true);
            $("#number").val(@Model.num_slots);
        $("#increase").val(@Model.num_slots);
        document.getElementById("increase").setAttribute("min", num);
        document.getElementById("increase").setAttribute("value", num);
        get_num();
        }
    $("#clearenum11").prop('disabled', true);


        var num = (parseInt($("#number").val()));
        document.getElementById("increase").setAttribute("min", num);
        document.getElementById("increase").setAttribute("value", num);
        var id = $("#parent").val();
        $.ajax({
            type: "post",
            url: "/Helper/job_title_card",
            data: { "id": id },
            success: function (result) {

                $("#parentname").val(result.name);
            }
        });
        var id = $("#chart1").val();
        $.ajax({
            type: "post",
            url: "/job_title_card/getchart",
            data: { "id": id },
            success: function (result) {
                $("#chartname").val(result.unit_Description);

            }
        });
        var id = $("#nationality").val();
        $.ajax({
            type: "post",
            url: "/Helper/nationality",
            data: { "id": id },
            success: function (result) {

                $("#nationalityname").val(result.Name);
            }
        });
        var id = $("#defaultt").val();
        $.ajax({
            type: "post",
            url: "/Helper/job_sub_class",
            data: { "id": id },
            success: function (result) {
                $("#defaultname").val(result.Name);

            }
        });
         var id = $("#level_setup").val();
        $.ajax({
            type: "post",
            url: "/Helper/job_level_setup",
            data: { "id": id },
            success: function (result) {

                $("#levelname").val(result.Name);
            }
        });


         function remove(thi) {

        thi.parent().parent().remove();
        //thi.parent().parent().parent().remove(removed);
        var t = parseInt($("#number").val());
        var u = parseInt('@ViewBag.num');
        $("#increase").val(t - 1);
        $("#number").val(t - 1);
        if (t == (u+1)) {
            $("#generateenum").attr('disabled', false);
            $("#number").readOnly = false;
            $("#clearenum11").attr('disabled', true);

        }
         }
   
</script>
    <div class="col-md-12">
        <div class="panel panel-primary" data-collapsed="0">
            <div class="panel-body">
                @using (Html.BeginForm("edit", "job_title_card", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <input name="iddd" value="" hidden />
                    <input name="job_level" value="" hidden />
                    <input name="organization" value="" hidden />
                    <input name="type" value="" hidden />
                    <input name="status" value="" hidden />
                    <input name="slotcode__" value="" hidden />
                    @Html.HiddenFor(m => m.ID ,new {htmlAttributes = new { id= "id_job_card" } })
                    
                    @Html.AntiForgeryToken()
                    <div class="form-horizontal">
                        <hr />
                        @if (TempData["Message"] != null)
                        {
                            <div class="alert alert-danger alert-dismissible" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                @TempData["Message"]
                            </div>
                        }
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        <div class="form-group">
                             <label style="color:red" class="control-label col-md-2">
                                @organ.code
                            </label>
                            <div class="col-md-4">
                                @Html.EditorFor(model => model.Code, new { htmlAttributes = new { @readonly = true, @class = "form-control", id = "code" } })
                                @Html.ValidationMessageFor(model => model.Code, "", new { @class = "text-danger" })

                            </div>
                            <div class="col-md-4">
                                <button style="width:100%" type="submit" id="btnSubmit" name="Command" value="Submit" class="btn btn-success">@organ.joblevellinkdetoorganizationunittipes</button>
                            </div>

                        </div>
                        <div class="form-group">
                            <label style="color:red" class="control-label col-md-2">
                                @organ.name
                            </label> 
                            <div class="col-md-4">
                                @Html.EditorFor(model => model.name, new { htmlAttributes = new { @class = "form-control", id = "name" } })
                                @Html.ValidationMessageFor(model => model.name, "", new { @class = "text-danger" })

                            </div>

                            <div class="col-md-4" style="color:black">
                                <button style="width:100%" type="submit" id="btnSubmit" name="Command" value="Submit2" class="btn btn-success">@organ.jobtitledetails</button>
                            </div>
                          
                           
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-2">
                                @organ.description
                            </label><div class="col-md-4">
                                @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })

                            </div>
                            <div class="col-md-2">
                                <button type="submit" style="width:100%" id="btnSave" class="btn btn-success" name="Command" value="Save">@organ.Save</button>
                            </div>
                            <div class="col-md-2">
                                <a href="@Url.Action("index", "job_title_card")" style="width:100%" class="btn btn-danger btn-sm"><i class="fa fa-trash-o"></i>@organ.Back</a>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <ul class="nav nav-tabs bordered">
                                <!-- available classes "bordered", "right-aligned" -->
                                <li class="active">
                                    <a href="#home" data-toggle="tab">
                                        <span class="visible-xs"><i class="entypo-home"></i></span>
                                        <span class="hidden-xs">@organ.Home</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#profile" data-toggle="tab">
                                        <span class="visible-xs"><i class="entypo-user"></i></span>
                                        <span class="hidden-xs">@organ.slot</span>
                                    </a>
                                </li>

                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="home" style="overflow: hidden;width: auto;height: auto;">


                                    <div class="form-group">
                                        <label style="color:red" class="control-label col-md-2">
                                            <span>@organ.JobLevelSetup</span>
                                        </label>
                                        <div class="col-md-4">
                                            @Html.DropDownListFor(m => m.joblevelsetupID, new SelectList(ViewBag.level_Set_up, "ID", "Code"), organ.JobLevelSetup, new { @class = "select2", @onchange = "level()", @id = "level_setup" })
                                            @Html.ValidationMessageFor(model => model.joblevelsetupID, "", new { @class = "text-danger" })

                                        </div>

                                        <label style="color:red" class="control-label col-md-1">
                                            <span>@organ.working_system</span>
                                        </label>
                                        <div class="col-md-4">
                                            @Html.EnumDropDownListFor(m => m.working_system, new { @class = "select2" })
                                            @Html.ValidationMessageFor(model => model.joblevelsetupID, "", new { @class = "text-danger" })
                                        </div>

                                    </div>

                                    <div class="form-group">
                                        <label style="color:red" class="control-label col-md-2">
                                            <span>@organ.organizationchart</span>
                                        </label>

                                        <div class="col-md-4">
                                            @Html.DropDownListFor(m => m.Organization_unit_codeID, new SelectList(ViewBag.chart, "ID", "Code"), organ.organizationchart, new { @class = "select2", @onchange = "chart11()", @id = "chart1" })
                                            @Html.ValidationMessageFor(model => model.Organization_unit_codeID, "", new { @class = "text-danger" })


                                        </div>
                                        <label style="color:red" class="control-label col-md-1">
                                            <span>@Basic.jobtitle1</span>
                                        </label>
                                        <div class="col-md-4">
                                            @Html.EnumDropDownListFor(m => m.statuss, new { @class = "select2", @id = "job_system" })
                                            @Html.ValidationMessageFor(model => model.statuss, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-2">
                                            <span>@organ.parentjob</span>
                                        </label>
                                        <div class="col-md-4">
                                            @Html.DropDownListFor(m => m.parent_job, new SelectList(ViewBag.parent_jobbb, "ID", "Code"), organ.parentjob, new { @class = "select2", @onchange = "p11arent()", @id = "parent" })
                                            @Html.ValidationMessageFor(model => model.parent_job, "", new { @class = "text-danger" })

                                        </div>
                                        <label class="control-label col-md-1">
                                            <span>@organ.nationality</span>
                                        </label>

                                        <div class="col-md-4">
                                            @Html.DropDownListFor(m => m.nationalityID, new SelectList(ViewBag.nationality, "ID", "Code"), organ.nationality, new { @class = "select2", @onchange = "nationality11()", @id = "nationality" })
                                            @Html.ValidationMessageFor(model => model.nationalityID, "", new { @class = "text-danger" })

                                        </div>

                                    </div>
                                    <div class="form-group">
                                        <label style="color:red" class="control-label col-md-2">
                                            <span> @organ.Defaultjobtitlesubclass</span>
                                        </label>

                                        <div class="col-md-4">
                                            @Html.DropDownListFor(m => m.Default_job_title_sub_classID, new SelectList(ViewBag.subclass, "ID", "Code"), organ.Defaultjobtitlesubclass, new { @class = "select2", @onchange = "defaultt11()", @id = "defaultt" })
                                            @Html.ValidationMessageFor(model => model.Default_job_title_sub_classID, "", new { @class = "text-danger" })

                                        </div>

                                        <label class="control-label col-md-1">
                                            <span>@organ.Fromage </span>
                                        </label>

                                        <div class="col-md-1">
                                            @Html.EditorFor(model => model.from_age, new { htmlAttributes = new { @min = "1", @class = "form-control" } })
                                        </div>
                                        <label class="control-label col-md-1">
                                            <span> @organ.Toage </span>
                                        </label>
                                        <div class="col-md-1">
                                            @Html.EditorFor(model => model.to_age, new { htmlAttributes = new { @min = "1", @class = "form-control" } })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label style="color:red" class="control-label col-md-2">
                                            <span>@Basic.jobtitle</span>
                                        </label>
                                        <div class="col-md-4">
                                            @Html.EnumDropDownListFor(m => m.parment, new { @class = "select2", @id = "job_system" })
                                            @Html.ValidationMessageFor(model => model.parment, "", new { @class = "text-danger" })
                                        </div>


                                        <label style="color:red" class="control-label col-md-1">
                                            <span>@organ.validity</span>
                                        </label>
                                        <div class="col-md-4">
                                            @Html.EnumDropDownListFor(m => m.validity, new { @class = "select2", @id = "job_system" })
                                            @Html.ValidationMessageFor(model => model.validity, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                  
                                    <div class="form-group">
                                        <label style="color:red" class="control-label col-md-2">
                                            <span> @organ.num_slots</span>
                                        </label>
                                        <div class="col-md-2">
                                            @Html.EditorFor(model => model.num_slots, new { htmlAttributes = new { id = "number", min = "0", @class = "form-control", @readonly = true } })
                                            @Html.ValidationMessageFor(model => model.num_slots, "", new { @class = "text-danger" })
                                        </div>
                                        <div class="col-md-2">
                                            <input type="number" class="form-control" id="increase" value="0" min="0" />
                                        </div>
                                        <div class="col-md-1">

                                        </div>
                                <div class="col-md-2">
                                    <input type="button" style="width:100%" value=@organ.increasenumberofslots onclick="generat3e()" class="col-md-3 btn btn-success" id="generateenum" />

                                </div>
                               @*<div class="col-md-2">
                                   <input type="button" value=@organ.clear onclick="clearnum()" class="col-md-1 btn btn-success" style="width:100%; margin-right:10px" id="clearenum11" />
                               </div>*@  

                                    </div>
                                    <div class="form-group">
                                        <label style="color:red" class="control-label col-md-2">
                                            <span>@organ.gender</span>
                                        </label>
                                        <div class="col-md-4">
                                            @Html.EnumDropDownListFor(m => m.gender, new { @class = "select2", @id = "job_system" })
                                            @Html.ValidationMessageFor(model => model.gender, "", new { @class = "text-danger" })
                                        </div>
                                        <label class="control-label col-md-1">

                                            <span>
                                                shift
                                            </span>
                                        </label>
                                        <div class="col-md-4">
                                            <input disabled class="form-control" />
                                            @*@Html.EnumDropDownListFor(m => m.gender, new { vaule="", @disabled = "disabled", @class = "select2", @id = "job_system" })*@
                                            @*@Html.ValidationMessageFor(model => model.status, "", new { @class = "text-danger" })*@
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-2">
                                            <span>@organ.job_Summery</span>
                                        </label>
                                        <div class="col-md-10">
                                            @Html.TextAreaFor(model => model.job_Summery, 6, 67, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.job_Summery, "", new { @class = "text-danger" })
                                        </div>

                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-2">
                                            <span>@organ.Job_alt_summery</span>
                                        </label>
                                        <div class="col-md-10">
                                            @Html.TextAreaFor(model => model.Job_alt_summery, 6, 67, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Job_alt_summery, "", new { @class = "text-danger" })

                                        </div>

                                    </div>
                                </div>
                                <div class="tab-pane" id="profile">

                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                               
                                                <th>
                                                    <label class="control-label col-md-3">@Basic.code </label>
                                                </th>
                                                <th>
                                                    <label class="control-label col-md-3">@Basic.joblevel</label>
                                                </th>
                                                <th>
                                                    <label class="control-label col-md-3">@Basic.slottyupe</label>
                                                </th>
                                                <th>
                                                    <label class="control-label col-md-3">@organ.description </label>
                                                </th>
                                                <th>
                                                    <label class="control-label col-md-3">@Basic.unit</label>
                                                </th>
                                                <th>
                                                    <label class="control-label col-md-3">@organ.status</label>
                                                </th>
                                                <th>
                                                    <label class="control-label col-md-3">@organ.empID</label>
                                                </th>

                                                <th>
                                                    <label class="control-label col-md-3">@organ.empname</label>
                                                </th>
                                                <th>

                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="add11">
                                            @for (var item = 0; item < Model.Slots.Count(); item++)
                                            {
                                                @Html.HiddenFor(m => m.Slots[item].ID)
                                                @Html.HiddenFor(m => m.Slots[item].slot_description)
                                                @Html.HiddenFor(m => m.Slots[item].slot_type)
                                                @Html.HiddenFor(m => m.Slots[item].job_level_setup.Name)
                                                @Html.HiddenFor(m => m.Slots[item].slot_code)
                                                @Html.HiddenFor(m => m.Slots[item].Organization_Chart__.unit_Description)
                                                @Html.HiddenFor(m => m.Slots[item].check_status)
                                                if (Model.Slots[item].EmployeeID != null)
                                                {
                                                    @Html.HiddenFor(m => m.Slots[item].EmployeeName)
                                                    @Html.HiddenFor(m => m.Slots[item].EmployeeID)
                                                    
                                                }
                                                <tr>
                                                   
                                                    <td hidden>
                                                        <input name="iddd" value="@Model.Slots[item].ID" hidden />
                                                    </td>
                                                    <td>
                                                        <input class="form-control" name="slotcode__" value="@Model.Slots[item].slot_code" readonly />

                                                    </td>
                                                    @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                    {
                                                        <script>

                                                                  call(@Model.Slots[item].job_level_setup.ID);

                                                                  function call(ID) {
                                                                      $.ajax
                                                                             ({
                                                                                 type: "post",
                                                                                 url: "/Helper/ALL_job_level_setup",
                                                                                 data: {},
                                                                                 success: function (result) {
                                                                                     seconddrop = "";
                                                                                     var v=0;

                                                                                     $.each(result, function (key, value) {
                                                                                         if (value.ID == ID) {
                                                                                             v=ID;
                                                                                             seconddrop += "<option  value='" + value.ID + "' selected >" + "[  " + value.Code + " ]</option>";
                                                                                         }
                                                                                         else {
                                                                                             seconddrop += "<option value='" + value.ID + "' >" + "[  " + value.Code + " ]</option>";
                                                                                         }

                                                                                     })
                                                                                     var o=@Model.Slots[item].ID;
                                                                                     $("#@Model.Slots[item].ID" ).append(seconddrop);
                                                                                     $("#@Model.Slots[item].ID" ).select2("val",v);


                                                                                 }
                                                                             });

                                                                  }
                                                        </script>

                                                        <td><select id=@Model.Slots[item].ID name="job_level" class="select2"></select></td>
                                                    }
                                                    else
                                                    {
                                                        <td hidden>              <input name="job_level" value="@Model.Slots[item].job_level_setup.ID" hidden /></td>
                                                     <td>           <input class="form-control" value="@Model.Slots[item].job_level_setup.Name" readonly /></td>
                                                    }


                                                    @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                    {
                                                        <td>
                                                            <select id="oppo" name="type" class="select2">
                                                                @if (Model.Slots[item].slot_type == HR.Models.Infra.slot_type.Active)
                                                                {
                                                                    <option value="1" selected>Active </option>
                                                                    <option value="2">Dis-ctive </option>
                                                                }
                                                                else
                                                                {
                                                                    <option value="1">Active </option>
                                                                    <option value="2" selected>Dis-Active </option>
                                                                }
                                                            </select>
                                                        </td>
                                                    }
                                                  


                                                    else
                                                    {
                                                        @*<input type="" class="form-control" name='type' value="@Model.Slots[item].slot_type" />*@

                                                        <td>
                                                            <input class="form-control" name='type' value="@Model.Slots[item].slot_type" readonly />
                                                        </td>
                                                    }
                                                    <td>
                                                        <input class="form-control" value="@Model.Slots[item].slot_description" readonly />
                                                    </td>



                                                    @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                    {
                                                        var t = @Model.Slots[item].ID + 1000000;
                                                        <td>    <select id=@t name="organization" class="select2"></select></td>

                                                        <script>

                                                                    call(@Model.Slots[item].Organization_Chart__.ID);

                                                                    function call(ID) {
                                                                        $.ajax
                                                                               ({
                                                                                   type: "post",
                                                                                   url: "/Helper/all_organization_chart",
                                                                                   data: {},
                                                                                   success: function (result) {
                                                                                       seconddrop = "";
                                                                                       var v=0;

                                                                                       $.each(result, function (key, value) {
                                                                                           if (value.ID == ID) {
                                                                                               v=ID;
                                                                                               seconddrop += "<option  value='" + value.ID + "' selected >" + "[  " + value.Code + " ]</option>";
                                                                                           }
                                                                                           else {
                                                                                               seconddrop += "<option value='" + value.ID + "' >" + "[  " + value.Code + " ]</option>";
                                                                                           }

                                                                                       })
                                                                                       var t = @Model.Slots[item].ID + 1000000;
                                                                                       var t=  $("#@t" );
                                                                                       $("#@t" ).append(seconddrop);
                                                                                       $("#@t" ).select2("val",v);


                                                                                   }
                                                                               });

                                                                    }
                                                        </script>

                                                    }
                                                    else
                                                    {
                                                        <td>     <input class="form-control" value="@Model.Slots[item].Organization_Chart__.unit_Description" readonly /></td>
                                                        <td hidden>     <input name="organization" value="@Model.Slots[item].Organization_Chart__.ID" hidden /></td>
                                                    }
                                                    <td>
                                                        <input class="form-control" name="status" value="@Model.Slots[item].check_status" readonly />

                                                    </td>
                                                    @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                    {
                                                        <td>
                                                            <input class="form-control" value=empty readonly />
                                                        </td>

                                                    }
                                                    else
                                                    {

                                                       <td>
                                                            <input class="form-control" value="@Model.Slots[item].EmployeeID" readonly />
                                                        </td>
                                                    }
                                                    @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                    {
                                                       <td>
                                                            <input class="form-control" value=empty readonly />
                                                        </td>
                                                    }
                                                    else
                                                    {

                                                        <td>
                                                            <input class="form-control" value="@Model.Slots[item].EmployeeName" readonly />
                                                        </td>
                                                    }
                                                    @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                    {

                                                        <td>
                                                            <input type="button" value=@organ.remove class="remove btn btn-danger" onclick="remove($(this))" />
                                                        </td>
                                                    }
                                                    else
                                                    {
                                                    <td>

                                                    </td>
                                                    }
                                                </tr>
                                            }

                                        </tbody>
                                        <tbody id="add1">

                                        </tbody>
                                    </table>







                                      
                                        @*<div id="add11">
                                            @for (var item = 0; item < Model.Slots.Count(); item++)
                                            {
                                                @Html.HiddenFor(m => m.Slots[item].ID)
                                                @Html.HiddenFor(m => m.Slots[item].slot_description)
                                                @Html.HiddenFor(m => m.Slots[item].slot_type)
                                                @Html.HiddenFor(m => m.Slots[item].job_level_setup.Name)
                                                @Html.HiddenFor(m => m.Slots[item].slot_code)
                                                @Html.HiddenFor(m => m.Slots[item].Organization_Chart__.unit_Description)
                                                @Html.HiddenFor(m => m.Slots[item].check_status)

                                                <div>
                                                    <div class="form-group">
                                                        <div class="col-md-3">
                                                            <input name="iddd" value="@Model.Slots[item].ID" hidden />
                                                            <input class="form-control" name="slotcode__"value="@Model.Slots[item].slot_code" readonly />
                                                        </div>
                                                        <div class="col-md-3">
                                                         
                                                            @*<input  name="job_level" value="@Model.Slots[item].job_level_setup.ID" hidden />
                                                            @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                            {
                                                              <script>
                                                                   
                                                                  call(@Model.Slots[item].job_level_setup.ID);

                                                                  function call(ID) {
                                                                      $.ajax
                                                                             ({
                                                                                 type: "post",
                                                                                 url: "/Helper/ALL_job_level_setup",
                                                                                 data: {},
                                                                                 success: function (result) {
                                                                                     seconddrop = "";
                                                                                     var v=0;
                                                                                      
                                                                                     $.each(result, function (key, value) {
                                                                                         if (value.ID == ID) {
                                                                                             v=ID;
                                                                                             seconddrop += "<option  value='" + value.ID + "' selected >" + "[  " + value.Code + " ]</option>";
                                                                                         }
                                                                                         else {
                                                                                             seconddrop += "<option value='" + value.ID + "' >" + "[  " + value.Code + " ]</option>";
                                                                                         }

                                                                                     })
                                                                                     var o=@Model.Slots[item].ID;
                                                                                     $("#@Model.Slots[item].ID" ).append(seconddrop);
                                                                                     $("#@Model.Slots[item].ID" ).select2("val",v);
                                                                                      

                                                                                 }
                                                                             });

                                                                  }
                                                              </script>
                                                                <select id=@Model.Slots[item].ID  name = "job_level" class="select2" >
                                                                   
                                                                </select>
                                                            }
                                                            else
                                                            {
                                                                <input  name="job_level" value="@Model.Slots[item].job_level_setup.ID" hidden />
                                                                <input class="form-control"  value="@Model.Slots[item].job_level_setup.Name" readonly />
                                                            }
                                                        </div>
                                                        <div class="col-md-3">
                                                            @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                            {
                                                                <select id = "oppo"  name = "type"  class = "select2">
                                                                    @if (Model.Slots[item].slot_type == HR.Models.Infra.slot_type.Active)
                                                                    {
                                                                    <option value="1" selected>Active </option>
                                                                    <option value="2">Dis-ctive </option>
                                                                    }
                                                                   else
                                                                    {
                                                                        <option value="1" >Active </option>
                                                                        <option value="2" selected>Dis-Active </option>
                                                                    }
                                                                </select>
                                                            }
                                                            else
                                                            {
                                                                @*<input type="" class="form-control" name='type' value="@Model.Slots[item].slot_type" />
                                                              
                                                                <input class="form-control" name='type' value="@Model.Slots[item].slot_type" readonly />

                                                            }
                                                        </div>
                                                        @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                        {
                                                            <div class="col-md-2">
                                                                <input class="form-control" value=empty readonly />
                                                            </div>
                                                        }
                                                        else
                                                        {

                                                            <div class="col-md-2">
                                                                <input class="form-control" value="@Model.Slots[item].EmployeeID" readonly />
                                                            </div>
                                                        }
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-md-3">
                                                            <input class="form-control" value="@Model.Slots[item].slot_description" readonly />
                                                        </div>

                                                        <div class="col-md-3">
                                                            @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                            {
                                                                var t = @Model.Slots[item].ID + 1000000;
                                                                <select id=@t name="organization" class="select2"></select>
                                                                <script>
                                                                     
                                                                    call(@Model.Slots[item].Organization_Chart__.ID);

                                                                    function call(ID) {
                                                                        $.ajax
                                                                               ({
                                                                                   type: "post",
                                                                                   url: "/Helper/all_organization_chart",
                                                                                   data: {},
                                                                                   success: function (result) {
                                                                                       seconddrop = "";
                                                                                       var v=0;
                                                                                        
                                                                                       $.each(result, function (key, value) {
                                                                                           if (value.ID == ID) {
                                                                                               v=ID;
                                                                                               seconddrop += "<option  value='" + value.ID + "' selected >" + "[  " + value.Code + " ]</option>";
                                                                                           }
                                                                                           else {
                                                                                               seconddrop += "<option value='" + value.ID + "' >" + "[  " + value.Code + " ]</option>";
                                                                                           }

                                                                                       })
                                                                                       var t = @Model.Slots[item].ID + 1000000;
                                                                                       var t=  $("#@t" );
                                                                                       $("#@t" ).append(seconddrop);
                                                                                       $("#@t" ).select2("val",v);


                                                                                   }
                                                                               });

                                                                    }
                                                                </script>
                                                              
                                                            }
                                                            else
                                                            {
                                                                <input class="form-control" value="@Model.Slots[item].Organization_Chart__.unit_Description" readonly />
                                                                <input name="organization" value="@Model.Slots[item].Organization_Chart__.ID" hidden />
                                                            }
                                                        </div>
                                                        <div class="col-md-3">
                                                            <input class="form-control" name="status" value="@Model.Slots[item].check_status" readonly />
                                                        </div>
                                                        @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                        {
                                                            <div class="col-md-2">
                                                                <input class="form-control" value=empty readonly />
                                                            </div>
                                                        }
                                                        else
                                                        {

                                                            <div class="col-md-2">
                                                                <input class="form-control" value="@Model.Slots[item].EmployeeName" readonly />
                                                            </div>
                                                        }
                                                        @if (Model.Slots[item].EmployeeID == null || Model.Slots[item].EmployeeID == "0")
                                                        {
                                                          
                                                            <input type="button" value=@organ.remove class="col-md-1 remove btn btn-danger" onclick="remove1($(this))" />
                                                        }
                                                    </div>
                                                    <hr /><hr />
                                                </div>
                                            }
                                                <hr /><hr/>
                                            
                                        </div>*@
                                   

                                    </div>

                            </div>
                        </div>

                       
                    </div>
                }
            </div>
        </div>
    </div>
    @section scripts{}
  <script>
      ///update_num

      get_num();

      function get_num()
      {
            debugger
        var id=@Model.ID;
        $.ajax
               ({


                   type: "post",
                   url: "/job_title_card/get_num_slots",
                   data: {"id":id  },
                   success: function (result)
                   {
                       debugger
                       $("#number").val(result);
                       $("#increase").val(result);
                   }
               });

      }


</script>